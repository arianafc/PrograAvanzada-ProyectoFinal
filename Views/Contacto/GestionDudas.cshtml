@using ProyectoFinal.Models
@model Tuple<List<ConsultaViewModel>, List<ConsultaViewModel>>

@{
    ViewBag.Title = "Gestión de Dudas - Admin";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<!-- Enlace al archivo CSS personalizado -->
<link rel="stylesheet" href="~/Content/GestionDudas.css" />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<div class="dudas-container">
    <h2 class="titulo-dudas">Gestión de Dudas</h2>

    <div class="row">
        <!-- Dudas Resueltas -->
        <div class="col-md-6">
            <h4 class="text-success seccion-titulo"><i class="bi bi-check-circle-fill me-2"></i>Dudas Resueltas</h4>
            @if (Model.Item1.Any())
            {
                foreach (var consulta in Model.Item1)
                {
                    <div class="card-consulta">
                        <p class="mb-1"><strong>@consulta.Nombre @consulta.Apellido</strong> - @consulta.Correo</p>
                        <p class="mb-2">@consulta.Mensaje</p>
                        <small class="text-muted">Recibida: @consulta.Fecha</small><br />
                        <small class="text-muted">Resuelta: @consulta.FechaResuelta</small>
                    </div>
                }
            }
            else
            {
                <p class="sin-datos">No hay dudas resueltas aún.</p>
            }
        </div>

        <!-- Dudas Pendientes -->
        <div class="col-md-6">
            <h4 class="text-danger seccion-titulo"><i class="bi bi-hourglass-split me-2"></i>Dudas Pendientes</h4>
            @if (Model.Item2.Any())
            {
                foreach (var consulta in Model.Item2)
                {
                    <div class="card-consulta">
                        <p class="mb-1"><strong>@consulta.Nombre @consulta.Apellido</strong> - @consulta.Correo</p>
                        <p class="mb-2">@consulta.Mensaje</p>
                        <small class="text-muted">Recibida: @consulta.Fecha</small>

                        <form action="@Url.Action("MarcarComoResuelta", "Contacto")" method="post" class="mt-3">
                            <input type="hidden" name="id" value="@consulta.IdConsulta" />
                            <button type="submit" class="btn-resuelta">
                                <i class="bi bi-check-circle me-1"></i>Marcar como Resuelta
                            </button>
                        </form>
                    </div>
                }
            }
            else
            {
                <p class="sin-datos">No hay dudas pendientes.</p>
            }
        </div>
    </div>
</div>
